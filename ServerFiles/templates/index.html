{%extends 'base.html' %}

{% block head %}
<title> Entry to Alexa.</title>
<script type=text/javascript>
    $(function() {
        $('a#calculate').bind('click', function() {
            $.getJSON('/_add_numbers', {
                a: $('input[name="a"').val(),
                b: $('input[name="b"]').val()
            }, function(data) {
                $("#result").text(data.result);
            });
            return false;
        });
    });
</script>

<script type=text/javascript>
console.log('we in second socket.')
    var socket = io()
    socket.on('my response', function(json) {
        console.log('second socket gets triggered.')
        $('#response').text(json.data);
        console.log('received json: ' + json.data);
    });
    socket.on('handle alexa', function(ms) {
        console.log('third socket triggered.');
    });
</script>

{% endblock %}

{% block body %}
<div id="header">
    <h1> Welcome to Alexa Let's Play!</h1>
    <p><input type="text" size=5 name=a> + 
        <input type="text" size=5 name=b> = 
        <span id=result>?</span>
    <p><a href="#" id=calculate>calculate server side</a> </p>
</div>

<div id="socketIOtesting">
<p id=log></p>
<p id=response></p>
<p id=send></p>
</div>
{% endblock %}